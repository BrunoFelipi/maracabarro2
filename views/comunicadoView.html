<div ng-controller="comunicadoViewCtrl">

    <header>
        <!--
        <nav class="orange darken-4">
            <div class="nav-wrapper">
                <a href="#/" class="brand-logo left light">Maracabarro</a>
                <ul id="nav-mobile" class="right">
                    <li><a href="#/financas" class="light">Finanças</a></li>
                    <li><a href="#/eventos" class="light">Eventos</a></li>
                    <li class="active"><a href="#/comunicados" class="light">Comunicados</a></li>
                    <li><a href="#/jogos" class="light">Jogos</a></li>
                    <li><a href="#/estatuto" class="light">Estatuto</a></li>
                    <li><a href="#/calendario" class="light">Calendário</a></li>
                    <li><a href="#/promocoes" class="light">Promoções</a></li>
                </ul>
            </div>
        </nav>
        -->
    </header>

    <main>

        <div class="container">
            <div class="row">
                <div class="col s12 m10 l10 offset-m1 offset-l1">

                    <!-- COMUNICADO -->
                    <div class="card horizontal">
                        <div class="card-image">

                        </div>
                        <div class="card-stacked">
                            <span class="label label-danger" ng-if="comunicado.importante == 1">{{comunicado.usuarioResponsavel}} - {{ dataPublicacao | date:"dd/MM/yyyy 'às' HH:mm:ss"}}</span>
                            <span class="label label-info" ng-if="comunicado.importante != 1">{{comunicado.usuarioResponsavel}} - {{comunicado.dataPublicacao}}</span>
                            <div class="card-content">
                                <p>
                                    {{comunicado.titulo}}
                                    <div class="right" ng-if="comunicado.importante == '1'">
                                        <i class="small material-icons red-text">new_releases</i>
                                    </div>
                                </p>
                                <p>{{comunicado.conteudo}}</p>
                            </div>
                            <div class="card-action dropdown">
                                <a href="" ng-click="addCurtida(comunicado.id)" ng-if="habilitaCurtir == true">{{comunicado.qtdCurtidas}} <i class="tiny material-icons">thumb_up</i></a>
                                <span ng-if="habilitaCurtir == false">{{comunicado.qtdCurtidas}} <i class="tiny material-icons">thumb_up</i></span>
                                <span class="label tiny label-primary" ng-if="habilitaCurtir == false">Você curtiu isso</span>
                                <a class="waves-effect waves-light btn orange darken-4 right white-text" href="#/comunicados/edit/{{comunicado.id}}" ng-if="usuarioAtivo.admin == 's'">Editar</a>

                                <div style="padding-top: 10px" ng-if="usuarioAtivo.admin == 's'">
                                    <span class="label label-primary" style="margin-right: 5px" ng-repeat="usu in usuariosCurtiram">{{usu.usuario}}</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- COMENTÁRIOS -->
                    <div class="alert alert-warning" role="alert" ng-if="qtdComentarios > 0">Comentários ({{qtdComentarios}})</div>
                    <div class="alert alert-success" role="alert" ng-if="qtdComentarios == 0">Seja o primeiro a comentar</div>
                    <div class="card horizontal" ng-if="comentarios.length != 0">
                        <div class="card-stacked">
                            <div class="card-content">
                                <div class="input-field">
                                    <div ng-repeat="comentario in comentarios">
                                        <span class="label label-danger">{{comentario.usuario}}</span>
                                        <br>
                                        <textarea class="form-control" disabled>{{comentario.comentario}}</textarea>
                                        <br>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <form ng-submit="addComentario(texto)">
                        <div class="input-field">                            
                            <textarea ng-model="texto" class="form-control" required></textarea>
                            <span class="label label-danger">colocar nome do usuario logado aqui</span>
                            <br>
                            <br>                            
                            <button type="button" ng-click="openComunicadosView()" class="btn btn-default btn-sm">
                                <span class="glyphicon glyphicon-chevron-left"></span> Voltar                                
                            </button>                            
                            <button type="submit" class="btn btn-danger btn-sm pull-right">Comentar</button>
                            
                        </div>
                    </form>
                </div>
            </div>
        </div>

    </main>

    <footer>

    </footer>
</div>

<script type="text/javascript">

$(document).ready(function(){
  $('.collapsible').collapsible();
  $('.dropdown-button').dropdown();

});

</script>